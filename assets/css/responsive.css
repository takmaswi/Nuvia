/*
 * NUVIA PROPERTIES & DEVELOPMENTS
 * Responsive Styles - Mobile First
 */

/* ============================================
   MOBILE BASE (320px - 767px)
   ============================================ */

/* Mobile Navigation */
@media (max-width: 767px) {

    /* CRITICAL: Prevent horizontal scroll */
    html,
    body {
        overflow-x: hidden;
        max-width: 100vw;
        width: 100%;
    }

    /* Lock body scroll when mobile nav is open */
    body.nav-open {
        overflow: hidden;
        position: fixed;
        width: 100%;
    }


    /* Ensure all containers respect viewport */
    .container,
    .container-wide,
    main,
    section,
    .section {
        max-width: 100vw;
        overflow-x: hidden;
        box-sizing: border-box;
    }

    /* Fix property grid and other grids */
    .property-grid,
    .grid,
    .grid-2,
    .grid-3,
    .grid-4,
    .services-grid,
    .trust-grid,
    .footer-grid {
        max-width: 100%;
        overflow: hidden;
    }

    .header {
        height: 70px;
    }

    main {
        padding-top: 70px;
    }

    .logo img {
        height: 40px;
    }

    .logo-text span:first-child {
        font-size: var(--text-lg);
    }

    /* Mobile Navigation Menu - Fixed overlay */
    .nav-links {
        position: fixed;
        top: 70px;
        left: 0;
        right: 0;
        bottom: 0;
        /* CRITICAL: Solid background to prevent content bleed-through */
        background: var(--white);
        /* Ensure no transparency */
        opacity: 1;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        padding-top: var(--space-6);
        gap: var(--space-4);
        transform: translateX(100%);
        transition: transform var(--transition-base);
        /* Higher than header to ensure it's on top */
        z-index: 1001;
        /* Add shadow for visual separation */
        box-shadow: -4px 0 20px rgba(0, 0, 0, 0.15);
    }

    .nav-links.active {
        transform: translateX(0);
    }

    .nav-links a {
        font-size: var(--text-lg);
    }

    .nav-cta {
        display: none;
    }

    .nav-links .btn {
        margin-top: var(--space-4);
    }

    .mobile-menu-btn {
        display: flex;
        /* Ensure button is above nav */
        z-index: 1002;
        position: relative;
    }

    .mobile-menu-btn.active span:nth-child(1) {
        transform: rotate(45deg) translate(5px, 5px);
    }

    .mobile-menu-btn.active span:nth-child(2) {
        opacity: 0;
    }

    .mobile-menu-btn.active span:nth-child(3) {
        transform: rotate(-45deg) translate(5px, -5px);
    }

    /* Hero Mobile */
    .hero {
        min-height: 90vh;
        padding-top: 70px;
    }

    .hero-content h1 {
        font-size: 2rem;
    }

    .hero-content p {
        font-size: 1rem;
    }

    .hero-cta {
        flex-direction: column;
        align-items: center;
    }

    .hero-cta .btn {
        width: 100%;
        max-width: 280px;
    }

    /* Sections */
    .section {
        padding: var(--space-6) 0;
    }

    .container {
        padding: 0 var(--space-2);
    }


    /* Grids */
    .grid-2,
    .grid-3,
    .grid-4 {
        grid-template-columns: 1fr;
    }

    .services-grid {
        grid-template-columns: 1fr;
    }

    .trust-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .property-grid {
        grid-template-columns: 1fr;
    }

    /* Cards */
    .card {
        padding: var(--space-3);
    }

    .card-glass {
        padding: var(--space-3);
    }

    /* Forms */
    .form-input,
    .form-textarea,
    .form-select {
        padding: 14px 16px;
    }

    /* Footer */
    .footer-grid {
        grid-template-columns: 1fr;
        gap: var(--space-4);
    }

    .footer-bottom {
        flex-direction: column;
        text-align: center;
    }

    .footer-legal {
        justify-content: center;
    }

    /* Tabs */
    .tab-list {
        flex-direction: column;
        border-bottom: none;
        gap: var(--space-1);
    }

    .tab-button {
        width: 100%;
        text-align: center;
        border: 1px solid var(--gray-soft);
        border-radius: var(--radius-md);
    }

    .tab-button.active {
        border-color: var(--gold);
        background: var(--gold-light);
    }

    /* Typography */
    h1 {
        font-size: 2rem;
    }

    h2 {
        font-size: 1.5rem;
    }

    h3 {
        font-size: 1.25rem;
    }

    /* Fix images that could overflow */
    img {
        max-width: 100%;
        height: auto;
    }

    /* Fix carousels and swiper */
    .swiper,
    .project-carousel,
    .project-carousel-section {
        max-width: 100%;
        overflow: hidden;
    }

    .swiper-slide {
        max-width: 100%;
    }

    /* Fix filter bar on properties page */
    .card.card-glass[style*="display: flex"] {
        flex-direction: column;
    }

    /* Ensure flex containers don't cause overflow */
    .flex,
    .flex-center,
    .flex-between {
        flex-wrap: wrap;
        max-width: 100%;
    }

    /* Property cards fix */
    .property-card {
        max-width: 100%;
    }

    .property-card .property-image img {
        width: 100%;
        max-width: 100%;
    }

    /* Accordion fix */
    .accordion,
    .accordion-item {
        max-width: 100%;
    }

    /* Button width constraints */
    .btn {
        max-width: 100%;
        word-wrap: break-word;
    }

    /* Trust items fix */
    .trust-item {
        max-width: 100%;
    }

    /* Section headers */
    .section-header {
        max-width: 100%;
        padding: 0 var(--space-2);
    }

    /* Carousel slide content */
    .carousel-slide-content,
    .carousel-slide-image {
        max-width: 100%;
    }
}


/* ============================================
   TABLET (768px - 1023px)
   ============================================ */
@media (min-width: 768px) and (max-width: 1023px) {
    .nav-links {
        gap: var(--space-3);
    }

    .nav-links a {
        font-size: var(--text-sm);
    }

    .nav-cta .btn {
        padding: 8px 16px;
        font-size: var(--text-sm);
    }

    .hero-content h1 {
        font-size: 2.5rem;
    }

    .grid-3 {
        grid-template-columns: repeat(2, 1fr);
    }

    .grid-4 {
        grid-template-columns: repeat(2, 1fr);
    }

    .services-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .property-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .footer-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

/* ============================================
   DESKTOP (1024px - 1439px)
   ============================================ */
@media (min-width: 1024px) {
    .container {
        padding: 0 var(--space-4);
    }

    .section {
        padding: var(--space-10) 0;
    }

    .hero {
        min-height: 100vh;
    }

    .hero-content h1 {
        font-size: 3rem;
    }

    .grid-3 {
        grid-template-columns: repeat(3, 1fr);
    }

    .grid-4 {
        grid-template-columns: repeat(4, 1fr);
    }

    .services-grid {
        grid-template-columns: repeat(3, 1fr);
    }

    .property-grid {
        grid-template-columns: repeat(3, 1fr);
    }

    .footer-grid {
        grid-template-columns: 2fr 1fr 1fr 1fr;
    }
}

/* ============================================
   LARGE DESKTOP (1440px+)
   ============================================ */
@media (min-width: 1440px) {
    .container {
        padding: 0 var(--space-6);
    }

    .hero-content h1 {
        font-size: 3.5rem;
    }

    h1 {
        font-size: 3rem;
    }

    h2 {
        font-size: 2.25rem;
    }

    h3 {
        font-size: 1.5rem;
    }
}

/* ============================================
   ACCESSIBILITY & REDUCED MOTION
   ============================================ */
@media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}

/* High contrast mode */
@media (prefers-contrast: high) {
    :root {
        --gold: #b8860b;
        --navy: #000033;
        --charcoal: #000000;
    }

    .card,
    .card-glass {
        border: 2px solid var(--navy);
    }

    .btn-primary {
        border: 2px solid var(--navy);
    }
}

/* ============================================
   PRINT STYLES
   ============================================ */
@media print {

    .header,
    .footer,
    .hero-cta,
    .btn,
    .mobile-menu-btn {
        display: none !important;
    }

    main {
        padding-top: 0;
    }

    body {
        font-size: 12pt;
        background: white;
        color: black;
    }

    h1,
    h2,
    h3,
    h4 {
        color: black;
        page-break-after: avoid;
    }

    img {
        max-width: 100%;
        page-break-inside: avoid;
    }

    .card,
    .card-glass {
        box-shadow: none;
        border: 1px solid #ccc;
        page-break-inside: avoid;
    }
}